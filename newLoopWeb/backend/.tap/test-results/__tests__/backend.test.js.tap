TAP version 14
Configured model: Account
Table used: accounts
Configured model: Movie
Table used: movies
Configured model: Review
Table used: Reviews
Configured model: Showtime
Table used: Showtimes
{"level":30,"time":1697266412538,"pid":96343,"hostname":"Nathans-MacBook-Air.local","reqId":"req-1","req":{"method":"POST","url":"/api/accounts/signup","hostname":"localhost:80","remoteAddress":"127.0.0.1"},"msg":"incoming request"}
Executing (default): INSERT INTO `accounts` (`id`,`username`,`password`,`email`) VALUES (DEFAULT,?,?,?);
{"level":30,"time":1697266412867,"pid":96343,"hostname":"Nathans-MacBook-Air.local","reqId":"req-1","res":{"statusCode":500},"responseTime":328.6358340084553,"msg":"request completed"}
# Subtest: Successfully create an account
    not ok 1 - should be equal
      ---
      compare: ===
      at:
        fileName: __tests__/backend.test.js
        lineNumber: 18
        columnNumber: 7
        typeName: Test
      stack: |
        Test.<anonymous> (__tests__/backend.test.js:18:7)
      source: |2
            });
      
            t.equal(response.statusCode, 201);
        ------^
            t.equal(response.json().message, 'Account created!');
        });
      diff: |
        --- expected
        +++ actual
        @@ -1,1 +1,1 @@
        -201
        +500
      ...
    
    not ok 2 - should be equal
      ---
      compare: ===
      at:
        fileName: __tests__/backend.test.js
        lineNumber: 19
        columnNumber: 7
        typeName: Test
      stack: |
        Test.<anonymous> (__tests__/backend.test.js:19:7)
      source: |2
      
            t.equal(response.statusCode, 201);
            t.equal(response.json().message, 'Account created!');
        ------^
        });
      diff: |
        --- expected
        +++ actual
        @@ -1,1 +1,1 @@
        -Account created!
        +Error creating account
      ...
    
    1..2
not ok 1 - Successfully create an account # time=647.497ms
  ---
  at:
    fileName: __tests__/backend.test.js
    lineNumber: 4
    columnNumber: 5
    typeName: Object
  source: |
    const { build } = require('../app');  
  
    tap.test('Successfully create an account', async (t) => {
    ----^
        const fastify = build();
        t.teardown(() => fastify.close());
  ...

{"level":30,"time":1697266412888,"pid":96343,"hostname":"Nathans-MacBook-Air.local","reqId":"req-1","req":{"method":"POST","url":"/api/accounts/signup","hostname":"localhost:80","remoteAddress":"127.0.0.1"},"msg":"incoming request"}
Executing (default): INSERT INTO `accounts` (`id`,`username`,`password`,`email`) VALUES (DEFAULT,?,?,?);
{"level":30,"time":1697266412921,"pid":96343,"hostname":"Nathans-MacBook-Air.local","reqId":"req-1","res":{"statusCode":500},"responseTime":32.04116699099541,"msg":"request completed"}
{"level":30,"time":1697266412921,"pid":96343,"hostname":"Nathans-MacBook-Air.local","reqId":"req-2","req":{"method":"POST","url":"/api/accounts/signup","hostname":"localhost:80","remoteAddress":"127.0.0.1"},"msg":"incoming request"}
Executing (default): INSERT INTO `accounts` (`id`,`username`,`password`,`email`) VALUES (DEFAULT,?,?,?);
{"level":30,"time":1697266412954,"pid":96343,"hostname":"Nathans-MacBook-Air.local","reqId":"req-2","res":{"statusCode":500},"responseTime":33.71891701221466,"msg":"request completed"}
# Subtest: Fail to create an account with an existing username
    ok 1 - should be equal
    ok 2 - should match pattern
    1..2
ok 2 - Fail to create an account with an existing username # time=71.215ms

{"level":30,"time":1697266412960,"pid":96343,"hostname":"Nathans-MacBook-Air.local","reqId":"req-1","req":{"method":"POST","url":"/api/accounts/signup","hostname":"localhost:80","remoteAddress":"127.0.0.1"},"msg":"incoming request"}
Executing (default): INSERT INTO `accounts` (`id`,`username`,`password`,`email`) VALUES (DEFAULT,?,?,?);
{"level":30,"time":1697266412996,"pid":96343,"hostname":"Nathans-MacBook-Air.local","reqId":"req-1","res":{"statusCode":500},"responseTime":35.81070801615715,"msg":"request completed"}
{"level":30,"time":1697266412996,"pid":96343,"hostname":"Nathans-MacBook-Air.local","reqId":"req-2","req":{"method":"POST","url":"/api/accounts/signin","hostname":"localhost:80","remoteAddress":"127.0.0.1"},"msg":"incoming request"}
Executing (default): SELECT `id`, `username`, `password`, `email` FROM `accounts` AS `Account` WHERE `Account`.`username` = 'TestUser';
{"level":30,"time":1697266413023,"pid":96343,"hostname":"Nathans-MacBook-Air.local","reqId":"req-2","res":{"statusCode":401},"responseTime":27.511999994516373,"msg":"request completed"}
# Subtest: Successfully sign in to an account
    not ok 1 - should be equal
      ---
      compare: ===
      at:
        fileName: __tests__/backend.test.js
        lineNumber: 75
        columnNumber: 7
        typeName: Test
      stack: |
        Test.<anonymous> (__tests__/backend.test.js:75:7)
      source: |2
            });
      
            t.equal(response.statusCode, 200);
        ------^
            t.equal(response.json().message, 'Sign in successful');
        });
      diff: |
        --- expected
        +++ actual
        @@ -1,1 +1,1 @@
        -200
        +401
      ...
    
    not ok 2 - should be equal
      ---
      compare: ===
      at:
        fileName: __tests__/backend.test.js
        lineNumber: 76
        columnNumber: 7
        typeName: Test
      stack: |
        Test.<anonymous> (__tests__/backend.test.js:76:7)
      source: |2
      
            t.equal(response.statusCode, 200);
            t.equal(response.json().message, 'Sign in successful');
        ------^
        });
      diff: |
        --- expected
        +++ actual
        @@ -1,1 +1,1 @@
        -Sign in successful
        +Invalid credentials
      ...
    
    1..2
not ok 3 - Successfully sign in to an account # time=71.607ms
  ---
  at:
    fileName: __tests__/backend.test.js
    lineNumber: 51
    columnNumber: 5
    typeName: Object
  source: |
    });
  
    tap.test('Successfully sign in to an account', async (t) => {
    ----^
        const fastify = build();
        t.teardown(() => fastify.close());
  ...

{"level":30,"time":1697266413032,"pid":96343,"hostname":"Nathans-MacBook-Air.local","reqId":"req-1","req":{"method":"POST","url":"/api/accounts/signup","hostname":"localhost:80","remoteAddress":"127.0.0.1"},"msg":"incoming request"}
Executing (default): INSERT INTO `accounts` (`id`,`username`,`password`,`email`) VALUES (DEFAULT,?,?,?);
{"level":30,"time":1697266413066,"pid":96343,"hostname":"Nathans-MacBook-Air.local","reqId":"req-1","res":{"statusCode":500},"responseTime":33.383875012397766,"msg":"request completed"}
{"level":30,"time":1697266413066,"pid":96343,"hostname":"Nathans-MacBook-Air.local","reqId":"req-2","req":{"method":"POST","url":"/api/accounts/signin","hostname":"localhost:80","remoteAddress":"127.0.0.1"},"msg":"incoming request"}
Executing (default): SELECT `id`, `username`, `password`, `email` FROM `accounts` AS `Account` WHERE `Account`.`username` = 'TestUser';
{"level":30,"time":1697266413089,"pid":96343,"hostname":"Nathans-MacBook-Air.local","reqId":"req-2","res":{"statusCode":401},"responseTime":22.70516699552536,"msg":"request completed"}
# Subtest: Fail to sign in with incorrect password
    ok 1 - should be equal
    ok 2 - should be equal
    1..2
ok 4 - Fail to sign in with incorrect password # time=60.644ms

{"level":30,"time":1697266413093,"pid":96343,"hostname":"Nathans-MacBook-Air.local","reqId":"req-1","req":{"method":"PUT","url":"/api/accounts/update/1","hostname":"localhost:80","remoteAddress":"127.0.0.1"},"msg":"incoming request"}
Executing (default): SELECT `id`, `username`, `password`, `email` FROM `accounts` AS `Account` WHERE `Account`.`id` = '1';
{"level":30,"time":1697266413118,"pid":96343,"hostname":"Nathans-MacBook-Air.local","reqId":"req-1","res":{"statusCode":200},"responseTime":24.81445899605751,"msg":"request completed"}
# Subtest: Successfully update account details
    ok 1 - should be equal
    ok 2 - should be equal
    1..2
ok 5 - Successfully update account details # time=29.181ms

1..5
